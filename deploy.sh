#!/bin/bash

echo "üöÄ MoonFeed Deployment Guide"
echo "=============================="
echo ""

echo "üìã Prerequisites:"
echo "1. GitHub account"
echo "2. Vercel account (connected to GitHub)"
echo "3. Render account"
echo ""

echo "üîß Initial Setup (One-time):"
echo ""

echo "1Ô∏è‚É£  Create GitHub Repository:"
echo "   ‚Ä¢ Go to https://github.com/new"
echo "   ‚Ä¢ Repository name: moonfeed"
echo "   ‚Ä¢ Make it public (or private if you prefer)"
echo "   ‚Ä¢ Don't initialize with README (we already have one)"
echo "   ‚Ä¢ Click 'Create repository'"
echo ""

echo "2Ô∏è‚É£  Push to GitHub:"
echo "   Run these commands in your terminal:"
echo "   git remote add origin https://github.com/YOUR_USERNAME/moonfeed.git"
echo "   git branch -M main"
echo "   git push -u origin main"
echo ""

echo "3Ô∏è‚É£  Deploy Backend to Render:"
echo "   ‚Ä¢ Go to https://render.com"
echo "   ‚Ä¢ Click 'New' ‚Üí 'Web Service'"
echo "   ‚Ä¢ Connect your GitHub repository"
echo "   ‚Ä¢ Select your moonfeed repository"
echo "   ‚Ä¢ Name: moonfeed-backend"
echo "   ‚Ä¢ Environment: Node"
echo "   ‚Ä¢ Build Command: npm install"
echo "   ‚Ä¢ Start Command: npm start"
echo "   ‚Ä¢ Root Directory: backend"
echo "   ‚Ä¢ Plan: Free"
echo "   ‚Ä¢ ‚ö†Ô∏è  IMPORTANT: Disable 'Auto-Deploy' in settings"
echo "   ‚Ä¢ Click 'Create Web Service'"
echo ""

echo "4Ô∏è‚É£  Deploy Frontend to Vercel:"
echo "   ‚Ä¢ Go to https://vercel.com"
echo "   ‚Ä¢ Click 'New Project'"
echo "   ‚Ä¢ Import your GitHub repository"
echo "   ‚Ä¢ Framework Preset: Vite"
echo "   ‚Ä¢ Root Directory: frontend"
echo "   ‚Ä¢ Build Command: npm run build"
echo "   ‚Ä¢ Output Directory: dist"
echo "   ‚Ä¢ Install Command: npm ci"
echo "   ‚Ä¢ ‚ö†Ô∏è  IMPORTANT: In project settings, disable 'Git Integration' auto-deploy"
echo "   ‚Ä¢ Environment Variables (add these in Vercel dashboard):"
echo "     - VITE_API_BASE_URL: https://YOUR_RENDER_SERVICE_URL"
echo "     - VITE_JUPITER_REFERRAL_ACCOUNT: 42DqmQMZrVeZkP2Btj2cS96Ej81jVxFqwUZWazVvhUPt"
echo "     - VITE_JUPITER_REFERRAL_FEE_BPS: 70"
echo "   ‚Ä¢ Click 'Deploy'"
echo ""

echo "üîÑ Manual Deployment Workflow:"
echo ""
echo "For each update:"
echo "1. Run: ./test-before-deploy.sh (test locally)"
echo "2. Push changes: git add . && git commit -m 'your message' && git push"
echo "3. Run: ./deploy-manual.sh (deploy when ready)"
echo ""

echo "üéâ Setup Complete!"
echo "Your app will be live at:"
echo "‚Ä¢ Frontend: https://your-app.vercel.app"
echo "‚Ä¢ Backend: https://your-app.onrender.com"
echo ""

echo "‚ú® Benefits of Manual Deployment:"
echo "‚Ä¢ Full control over when updates go live"
echo "‚Ä¢ Test locally before deploying"
echo "‚Ä¢ Deploy backend and frontend separately"
echo "‚Ä¢ No surprise deployments from accidental commits"
echo ""

echo "üìù Available Scripts:"
echo "‚Ä¢ ./test-before-deploy.sh - Test before deploying"
echo "‚Ä¢ ./deploy-manual.sh - Manual deployment controller"
echo "‚Ä¢ ./deploy.sh - This setup guide"
